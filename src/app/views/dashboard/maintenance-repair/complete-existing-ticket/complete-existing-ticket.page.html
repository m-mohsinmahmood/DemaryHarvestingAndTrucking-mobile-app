<app-header [title]="'Complete Existing Repair Ticket'" [color]="'maintenance-repair'" *ngIf="category === 'repair'" [routeValue]="'complete-maintenance-ticket'">
</app-header>
<app-header [title]="'Complete Existing Maintenance Ticket'" [color]="'maintenance-repair'" [routeValue]="'complete-maintenance-ticket'"
  *ngIf="category === 'maintenance'">
</app-header>

<ion-content *ngIf="category === 'repair'">
  <!-- <app-timer [value]="'01:12:45'"></app-timer> -->

  <div class="p-4">
    <form [formGroup]="completeExistingTicketForm">
      <ion-list>

        <div class="col-span-12 mb-4">
          <label class="block text-sm font-medium text-gray-700">Repair Ticket
            Number</label>

          <input
            class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"
            formControlName="repairTicketId" placeholder="" readonly>
        </div>

        <!-- <div class="col-span-12 mb-4">
          <label class="block text-sm font-medium text-gray-700">Employee Issue Reported<span class="text-red-600"
              *ngIf="this.completeExistingTicketForm.get('empIssueReportedId').hasError('required')">*</span></label>
          <input
            class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"
            formControlName="empIssueReportedId" placeholder="Employee issue reported">
        </div> -->

        <div class="col-span-12 mb-4">
          <label class="ml-5" class="block text-sm font-medium text-gray-700">Assigned by Mechanic/Supervisor<span
              class="text-red-600"
              *ngIf="this.completeExistingTicketForm.get('assignedById').hasError('required')">*</span></label>
          <input
            class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"
            readonly [value]="assignedBy"  placeholder="Enter Employee Name">
        </div>

        <div class="col-span-12 mb-4">
          <label class="block text-sm font-medium text-gray-700">Assigned to Mechanic/Employee<span class="text-red-600"
              *ngIf="this.completeExistingTicketForm.get('assignedToId').hasError('required')">*</span></label>
          <input
          [value]="assignedTo"
            class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"
            readonly placeholder="Enter Employee Name">
        </div>

        <div class="col-span-12 mb-4">
          <label class="block text-sm font-medium text-gray-700">Equipment ID<span class="text-red-600"
              *ngIf="this.completeExistingTicketForm.get('equipID').hasError('required')">*</span></label>
          <input
            class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"
            readonly formControlName="equipID" placeholder="Equipment ID">
        </div>

        <div class="col-span-12 mb-4">
          <label class="block text-sm font-medium text-gray-700">Equipment Location (City)<span class="text-red-600"
              *ngIf="this.completeExistingTicketForm.get('city').hasError('required')">*</span></label>
          <input
            class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"
            readonly formControlName="city" placeholder="City">
        </div>

        <div class="col-span-12 mb-4">
          <label class="block text-sm font-medium text-gray-700">Equipment Location (State)<span class="text-red-600"
              *ngIf="this.completeExistingTicketForm.get('state').hasError('required')">*</span></label>
          <input
            class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"
            readonly formControlName="state" placeholder="State">
        </div>

        <div class="col-span-12 mb-4">
          <label class="block text-sm font-medium text-gray-700">Category<span class="text-red-600"
              *ngIf="this.completeExistingTicketForm.get('issueCategory').hasError('required')">*</span></label>
          <input
            class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"
            readonly formControlName="issueCategory" placeholder="Enter Category">
        </div>

        <div class="col-span-12 mb-4">
          <ion-text class="block mt-4">
            <label class="block text-sm font-medium text-gray-700">Severity<span class="text-red-600"
                *ngIf="this.completeExistingTicketForm.get('severityType').hasError('required')">*</span></label>
          </ion-text>
          <input
            class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"
            readonly formControlName="severityType" placeholder="Severity">
        </div>

        <div class="col-span-12 mb-4">
          <label class="block text-sm font-medium text-gray-700">Status<span class="text-red-600"
              *ngIf="this.completeExistingTicketForm.get('status').hasError('required')">*</span></label>
          <input readonly class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500
            focus:outline-none focus:ring-indigo-500 sm:text-sm" formControlName="status" placeholder="Severity">
        </div>
        <div class="col-span-12 mb-4">
          <label class="block text-sm font-medium text-gray-700">Detailed Description of Issue<span class="text-red-600"
              *ngIf="this.completeExistingTicketForm.get('description').hasError('required')">*</span></label>
          <textarea
            class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"
            readonly formControlName="description" placeholder="Type something here">
          </textarea>
        </div>

        <div class="col-span-12 mb-4">
          <label class="block text-sm font-medium text-gray-700">Repair Summary
            <span class="text-red-600"
              *ngIf="this.completeExistingTicketForm.get('summary').hasError('required')">*</span></label>

          <textarea
            class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"
            formControlName="summary" placeholder="Enter Summary"></textarea>
        </div>
      </ion-list>

      <ion-button [disabled]="this.completeExistingTicketForm.invalid || (loadingSpinner | async)" class="font-Lato text-white mt-8" expand="block"
      (click)="completTicket()">
        <div *ngIf="(loadingSpinner | async) === false">Repair Complete</div>
            <ion-spinner name="crescent" *ngIf="(loadingSpinner | async)"></ion-spinner>
      </ion-button>
    </form>
  </div>
</ion-content>
<ion-content *ngIf="category === 'maintenance'">
  <!-- <app-timer [value]="'01:12:45'"></app-timer> -->

  <div class="p-4">
    <form [formGroup]="completeExistingTicketForm">
      <ion-list>

        <div class="col-span-12 mb-4">
          <label class="block text-sm font-medium text-gray-700">Repair Ticket
            Number</label>

          <input
            class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"
            formControlName="repairTicketId" placeholder="" readonly>
        </div>

        <!-- <div class="col-span-12 mb-4">
          <label class="block text-sm font-medium text-gray-700">Employee Issue Reported<span class="text-red-600"
              *ngIf="this.completeExistingTicketForm.get('empIssueReportedId').hasError('required')">*</span></label>
          <input
            class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"
            formControlName="empIssueReportedId" placeholder="Employee issue reported">
        </div> -->

        <div class="col-span-12 mb-4">
          <label class="ml-5" class="block text-sm font-medium text-gray-700">Assigned by Mechanic/Supervisor<span
              class="text-red-600"
              *ngIf="this.completeExistingTicketForm.get('assignedById').hasError('required')">*</span></label>
          <input
            class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"
            readonly [value]="assignedBy"  placeholder="Enter Employee Name">
        </div>

        <div class="col-span-12 mb-4">
          <label class="block text-sm font-medium text-gray-700">Assigned to Mechanic/Employee<span class="text-red-600"
              *ngIf="this.completeExistingTicketForm.get('assignedToId').hasError('required')">*</span></label>
          <input
          [value]="assignedTo"
            class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"
            readonly placeholder="Enter Employee Name">
        </div>

        <div class="col-span-12 mb-4">
          <label class="block text-sm font-medium text-gray-700">Equipment ID<span class="text-red-600"
              *ngIf="this.completeExistingTicketForm.get('equipID').hasError('required')">*</span></label>
          <input
            class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"
            readonly formControlName="equipID" placeholder="Equipment ID">
        </div>

        <div class="col-span-12 mb-4">
          <label class="block text-sm font-medium text-gray-700">Equipment Location (City)<span class="text-red-600"
              *ngIf="this.completeExistingTicketForm.get('city').hasError('required')">*</span></label>
          <input
            class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"
            readonly formControlName="city" placeholder="City">
        </div>

        <div class="col-span-12 mb-4">
          <label class="block text-sm font-medium text-gray-700">Equipment Location (State)<span class="text-red-600"
              *ngIf="this.completeExistingTicketForm.get('state').hasError('required')">*</span></label>
          <input
            class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"
            readonly formControlName="state" placeholder="State">
        </div>

        <div class="col-span-12 mb-4">
          <label class="block text-sm font-medium text-gray-700">Category<span class="text-red-600"
              *ngIf="this.completeExistingTicketForm.get('issueCategory').hasError('required')">*</span></label>
          <input
            class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"
            readonly formControlName="issueCategory" placeholder="Enter Category">
        </div>

        <div class="col-span-12 mb-4">
          <ion-text class="block mt-4">
            <label class="block text-sm font-medium text-gray-700">Severity<span class="text-red-600"
                *ngIf="this.completeExistingTicketForm.get('severityType').hasError('required')">*</span></label>
          </ion-text>
          <input
            class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"
            readonly formControlName="severityType" placeholder="Severity">
        </div>

        <div class="col-span-12 mb-4">
          <label class="block text-sm font-medium text-gray-700">Status<span class="text-red-600"
              *ngIf="this.completeExistingTicketForm.get('status').hasError('required')">*</span></label>
          <input readonly class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500
            focus:outline-none focus:ring-indigo-500 sm:text-sm" formControlName="status" placeholder="Severity">
        </div>
        <div class="col-span-12 mb-4">
          <label class="block text-sm font-medium text-gray-700">Detailed Description of Issue<span class="text-red-600"
              *ngIf="this.completeExistingTicketForm.get('description').hasError('required')">*</span></label>
          <textarea
            class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"
            readonly formControlName="description" placeholder="Type something here">
          </textarea>
        </div>

        <div class="col-span-12 mb-4">
          <label class="block text-sm font-medium text-gray-700">Maintenance Summary
            <span class="text-red-600"
              *ngIf="this.completeExistingTicketForm.get('summary').hasError('required')">*</span></label>

          <textarea
            class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"
            formControlName="summary" placeholder="Enter Summary"></textarea>
        </div>
      </ion-list>
      <ion-button [disabled]="this.completeExistingTicketForm.invalid || (loadingSpinner | async)" class="font-Lato text-white mt-8" expand="block"
      (click)="completTicket()">
        <div *ngIf="(loadingSpinner | async) === false">Maintenance Complete</div>
            <ion-spinner name="crescent" *ngIf="(loadingSpinner | async)"></ion-spinner>
      </ion-button>
    </form>
  </div>
</ion-content>
