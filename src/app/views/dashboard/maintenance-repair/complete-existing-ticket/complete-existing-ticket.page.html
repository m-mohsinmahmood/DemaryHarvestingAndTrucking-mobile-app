<app-header [title]="'Maintenance & Repair'" [color]="'maintenance-repair'"></app-header>

<ion-content>
  <app-timer [value]="'01:12:45'"></app-timer>

  <div class="p-4">
    <form [formGroup]="completeExistingTicketForm">
      <ion-list>
        <ion-item>
          <ion-label position="floating" *ngIf="category === 'repair'">Repair Ticket Number</ion-label>
          <ion-label position="floating" *ngIf="category === 'maintenance'">Maintenance Ticket Number</ion-label>
          <ion-input formControlName="ticketNum" placeholder="Ticket Number"></ion-input>
        </ion-item>
        <ion-text *ngIf="this.completeExistingTicketForm.get('ticketNum').hasError('required')"
          class="text-xs font-semibold font-Lato text-red-500 ml-5 mt-1">Ticket No. required</ion-text>

        <ion-item>
          <ion-label position="floating">Employee Issue Reported</ion-label>
          <ion-input formControlName="empIssueReported" placeholder="Employee Name"></ion-input>
        </ion-item>
        <ion-text *ngIf="this.completeExistingTicketForm.get('empIssueReported').hasError('required')"
          class="text-xs font-semibold font-Lato text-red-500 ml-5 mt-1">Employee Issue Reported required</ion-text>

        <ion-text class="block mt-4">
          <ion-label class="ml-5" position="floating">Assigned by Mechanic/Supervisor</ion-label>
        </ion-text>
        <ion-item>
          <ion-select formControlName="assignedBy" interface="popover" placeholder="Assigned by">
            <ion-select-option value="mike-kennedy">Mike Kennedy</ion-select-option>
            <ion-select-option value="bile-handy">Bile Handy</ion-select-option>
          </ion-select>
        </ion-item>
        <ion-text *ngIf="this.completeExistingTicketForm.get('assignedBy').hasError('required')"
          class="text-xs font-semibold font-Lato text-red-500 ml-5 mt-1">Assigned By required</ion-text>

        <ion-item>
          <ion-label position="floating">Assigned to Mechanic/Employee</ion-label>
          <ion-input formControlName="assignedTo" placeholder="Enter Employee Name"></ion-input>
        </ion-item>
        <ion-text *ngIf="this.completeExistingTicketForm.get('assignedTo').hasError('required')"
          class="text-xs font-semibold font-Lato text-red-500 ml-5 mt-1">Assigned To required</ion-text>

        <ion-item>
          <ion-label position="floating">Equipment ID</ion-label>
          <ion-input formControlName="equipID" placeholder="Equipment ID"></ion-input>
        </ion-item>
        <ion-text *ngIf="this.completeExistingTicketForm.get('equipID').hasError('required')"
          class="text-xs font-semibold font-Lato text-red-500 ml-5 mt-1">Equipment ID required</ion-text>

        <ion-item>
          <ion-label position="floating">Equipment Location (City)</ion-label>
          <ion-input formControlName="city" placeholder="City"></ion-input>
        </ion-item>
        <ion-text *ngIf="this.completeExistingTicketForm.get('city').hasError('required')"
          class="text-xs font-semibold font-Lato text-red-500 ml-5 mt-1">City required</ion-text>

        <ion-item>
          <ion-label position="floating">Equipment Location (State)</ion-label>
          <ion-input formControlName="state" placeholder="State"></ion-input>
        </ion-item>
        <ion-text *ngIf="this.completeExistingTicketForm.get('state').hasError('required')"
          class="text-xs font-semibold font-Lato text-red-500 ml-5 mt-1">State required</ion-text>

        <ion-item>
          <ion-label position="floating">Category</ion-label>
          <ion-input formControlName="categories" placeholder="Enter Category"></ion-input>
        </ion-item>
        <ion-text *ngIf="this.completeExistingTicketForm.get('categories').hasError('required')"
          class="text-xs font-semibold font-Lato text-red-500 ml-5 mt-1">Categories required</ion-text>

        <ion-item>
          <ion-text class="block mt-4">
            <ion-label position="floating">Severity</ion-label>
          </ion-text>
          <ion-input formControlName="severity" placeholder="Severity"></ion-input>
        </ion-item>
        <ion-text *ngIf="this.completeExistingTicketForm.get('severity').hasError('required')"
          class="text-xs font-semibold font-Lato text-red-500 ml-5 mt-1">Severity required</ion-text>

        <ion-text class="block mt-4">
          <ion-label class="ml-5" position="floating">Status</ion-label>
        </ion-text>
        <ion-item>
          <ion-select formControlName="status" interface="popover" placeholder="Status">
            <ion-select-option value="mike-kennedy" *ngIf="category === 'repair'">Repair In Process</ion-select-option>
            <ion-select-option value="mike-kennedy" *ngIf="category === 'maintenance'">Maintenance In Process
            </ion-select-option>
          </ion-select>
        </ion-item>
        <ion-text *ngIf="this.completeExistingTicketForm.get('status').hasError('required')"
          class="text-xs font-semibold font-Lato text-red-500 ml-5 mt-1">Status required</ion-text>

        <ion-item>
          <ion-label position="floating">Detailed Description of Issue</ion-label>
          <ion-textarea formControlName="description" placeholder="Type something here"></ion-textarea>
        </ion-item>
        <ion-text *ngIf="this.completeExistingTicketForm.get('description').hasError('required')"
          class="text-xs font-semibold font-Lato text-red-500 ml-5 mt-1">Description required</ion-text>

        <ion-item>
          <ion-label position="floating" *ngIf="category === 'repair'">Repair Summary</ion-label>
          <ion-label position="floating" *ngIf="category === 'maintenance'">Maintenance Summary</ion-label>
          <ion-textarea formControlName="summary" placeholder="Enter Summary"></ion-textarea>
        </ion-item>
        <ion-text *ngIf="this.completeExistingTicketForm.get('summary').hasError('required')"
          class="text-xs font-semibold font-Lato text-red-500 ml-5 mt-1">Summary required</ion-text>
      </ion-list>

      <ion-button [disabled]="this.completeExistingTicketForm.invalid" class="font-Lato text-white mt-8" expand="block"
        *ngIf="category === 'repair'" (click)="submit()">
        Repair Complete
      </ion-button>

      <ion-button [disabled]="this.completeExistingTicketForm.invalid" class="font-Lato text-white mt-8" expand="block"
        *ngIf="category === 'maintenance'" (click)="submit()">
        Maintenance Complete
      </ion-button>

    </form>
  </div>
</ion-content>
