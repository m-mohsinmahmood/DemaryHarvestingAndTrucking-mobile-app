<app-header [title]="'Complete Existing Repair Ticket'" [color]="'maintenance-repair'" *ngIf="category === 'repair'">
</app-header>
<app-header [title]="'Complete Existing Maintenance Ticket'" [color]="'maintenance-repair'"
  *ngIf="category === 'maintenance'">
</app-header>

<ion-content>
  <app-timer [value]="'01:12:45'"></app-timer>

  <div class="p-4">
    <form [formGroup]="completeExistingTicketForm">
      <ion-list>

        <div class="col-span-12 mb-4">
          <label class="block text-sm font-medium text-gray-700" *ngIf="category === 'repair'">Repair Ticket
            Number</label>
          <label class="block text-sm font-medium text-gray-700" *ngIf="category === 'maintenance'">Maintenance Ticket
            Number</label>
          <input
            class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"
            formControlName="ticketId" placeholder="Ticket Number" readonly>
        </div>

        <div class="col-span-12 mb-4">
          <label class="block text-sm font-medium text-gray-700">Employee Issue Reported</label>
          <input
            class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"
            formControlName="empIssueReportedId" placeholder="Employee Name">
          <ion-text *ngIf="this.completeExistingTicketForm.get('empIssueReportedId').hasError('required')"
            class="mt-2 text-sm text-red-600">Employee Issue Reported is required</ion-text>
        </div>

        <div class="col-span-12 mb-4">
          <label class="ml-5" class="block text-sm font-medium text-gray-700">Assigned by Mechanic/Supervisor</label>
          <ion-select
            class="mt-1  w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"
            formControlName="assignedById" placeholder="Assigned by">
            <ion-select-option value="1">Mike Kennedy</ion-select-option>
            <ion-select-option value="2">Bile Handy</ion-select-option>
          </ion-select>
          <ion-text *ngIf="this.completeExistingTicketForm.get('assignedById').hasError('required')"
            class="mt-2 text-sm text-red-600">Assigned By is required</ion-text>
        </div>

        <div class="col-span-12 mb-4">
          <label class="block text-sm font-medium text-gray-700">Assigned to Mechanic/Employee</label>
          <input
            class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"
            formControlName="assignedToId" placeholder="Enter Employee Name">
          <ion-text *ngIf="this.completeExistingTicketForm.get('assignedToId').hasError('required')"
            class="mt-2 text-sm text-red-600">Assigned To is required</ion-text>
        </div>

        <div class="col-span-12 mb-4">
          <label class="block text-sm font-medium text-gray-700">Equipment ID</label>
          <input
            class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"
            formControlName="equipID" placeholder="Equipment ID">
          <ion-text *ngIf="this.completeExistingTicketForm.get('equipID').hasError('required')"
            class="mt-2 text-sm text-red-600">Equipment ID is required</ion-text>
        </div>

        <div class="col-span-12 mb-4">
          <label class="block text-sm font-medium text-gray-700">Equipment Location (City)</label>
          <input
            class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"
            formControlName="city" placeholder="City">
          <ion-text *ngIf="this.completeExistingTicketForm.get('city').hasError('required')"
            class="mt-2 text-sm text-red-600">City is required</ion-text>
        </div>

        <div class="col-span-12 mb-4">
          <label class="block text-sm font-medium text-gray-700">Equipment Location (State)</label>
          <input
            class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"
            formControlName="state" placeholder="State">
          <ion-text *ngIf="this.completeExistingTicketForm.get('state').hasError('required')"
            class="mt-2 text-sm text-red-600">State is required</ion-text>
        </div>

        <div class="col-span-12 mb-4">
          <label class="block text-sm font-medium text-gray-700">Category</label>
          <input
            class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"
            formControlName="categoriesId" placeholder="Enter Category">
          <ion-text *ngIf="this.completeExistingTicketForm.get('categoriesId').hasError('required')"
            class="mt-2 text-sm text-red-600">Categories is required</ion-text>
        </div>

        <div class="col-span-12 mb-4">
          <ion-text class="block mt-4">
            <label class="block text-sm font-medium text-gray-700">Severity</label>
          </ion-text>
          <input
            class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"
            formControlName="severityId" placeholder="Severity">
          <ion-text *ngIf="this.completeExistingTicketForm.get('severityId').hasError('required')"
            class="mt-2 text-sm text-red-600">Severity is required</ion-text>
        </div>

        <div class="col-span-12 mb-4">
          <label class="ml-5" class="block text-sm font-medium text-gray-700">Status</label>
          <ion-select
            class="mt-1 w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"
            formControlName="statusId" placeholder="Status">
            <ion-select-option value="1" *ngIf="category === 'repair'">Repair In Process
            </ion-select-option>
            <ion-select-option value="1" *ngIf="category === 'maintenance'">Maintenance In Process
            </ion-select-option>
          </ion-select>
          <ion-text *ngIf="this.completeExistingTicketForm.get('statusId').hasError('required')"
            class="mt-2 text-sm text-red-600">Status is required</ion-text>
        </div>

        <div class="col-span-12 mb-4">
          <label class="block text-sm font-medium text-gray-700">Detailed Description of Issue</label>
          <textarea
            class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"
            formControlName="description" placeholder="Type something here">
          </textarea>
          <ion-text *ngIf="this.completeExistingTicketForm.get('description').hasError('required')"
            class="mt-2 text-sm text-red-600">Description is required
          </ion-text>
        </div>

        <div class="col-span-12 mb-4">
          <label class="block text-sm font-medium text-gray-700" *ngIf="category === 'repair'">Repair Summary
          </label>
          <label class="block text-sm font-medium text-gray-700" *ngIf="category === 'maintenance'">Maintenance
            Summary</label>
          <textarea
            class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"
            formControlName="summary" placeholder="Enter Summary"></textarea>
          <ion-text *ngIf="this.completeExistingTicketForm.get('summary').hasError('required')"
            class="mt-2 text-sm text-red-600">Summary is required
          </ion-text>
        </div>
      </ion-list>

      <ion-button [disabled]="this.completeExistingTicketForm.invalid" class="font-Lato text-white mt-8" expand="block"
        *ngIf="category === 'repair'" (click)="submit()">
        Repair Complete
      </ion-button>

      <ion-button [disabled]="this.completeExistingTicketForm.invalid" class="font-Lato text-white mt-8" expand="block"
        *ngIf="category === 'maintenance'" (click)="submit()">
        Maintenance Complete
      </ion-button>

    </form>
  </div>
</ion-content>
