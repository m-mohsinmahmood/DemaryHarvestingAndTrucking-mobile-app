
<app-header [title]="'Pre-Trip Check Digital Evaluation Form'" [color]="'training'" [routeValue]="'pre-trip'"></app-header>

<ion-content>
  <app-timer [value]="'01:23:45'"></app-timer>

    <div class="mx-4 my-2">
    <ion-progress-bar class="mb-2" [buffer]="buffer" [value]="progress" ></ion-progress-bar>
    <ion-text class="text-lg font-semibold justify-start flex font-Lato text-black ">{{progress * 5}} of 5 Categories Completed</ion-text>
  </div>
  <form [formGroup]="preTripForm">
    <div class="mt-2 ml-3">
      <ion-text *ngIf="value ==='engine/compartment'" class="font-semibold font-Lato text-9B9BA4 text-xl">Engine / Compartment</ion-text>
      <ion-text *ngIf="value ==='incab'" class="font-semibold font-Lato text-9B9BA4 text-xl">In Cab</ion-text>
      <ion-text *ngIf="value ==='vehicle/external'" class="font-semibold font-Lato text-9B9BA4 text-xl">Vehicle/External</ion-text>
      <ion-text *ngIf="value ==='coupling'" class="font-semibold font-Lato text-9B9BA4 text-xl">Coupling</ion-text>
      <ion-text *ngIf="value ==='suspension/brakes'" class="font-semibold font-Lato text-9B9BA4 text-xl">Suspension/Brakes</ion-text>
  </div>
    <p class="text-lg font-semibold font-Lato mt-4 ml-4">Pre-Trip Check Items</p>
    <!-- Engine/Compartment -->
     <div class="mx-4" *ngIf="value === 'engine/compartment'">
      <div class="flex justify-between items-center my-3">
       <ion-text class="font-Lato font-medium">Oil Level</ion-text>
        <ion-checkbox slot="start" formControlName="oilLevel"></ion-checkbox>
      </div>
      <div class="flex justify-between items-center my-3">
        <ion-text class="font-Lato font-medium" >Coolant Level</ion-text>
         <ion-checkbox slot="start" formControlName="coolantLevelEngine"></ion-checkbox>
       </div>
       <div class="flex justify-between items-center my-3">
        <ion-text class="font-Lato font-medium">Power Steeling Level</ion-text>
         <ion-checkbox slot="start" formControlName="powerSteelingLevel"></ion-checkbox>
       </div>
       <div class="flex justify-between items-center my-3">
        <ion-text class="font-Lato font-medium">H20 Pump engine</ion-text>
         <ion-checkbox slot="start" formControlName="h20"></ion-checkbox>
       </div>
       <div class="flex justify-between items-center my-3">
        <ion-text class="font-Lato font-medium">Alternator Belt</ion-text>
         <ion-checkbox slot="start" formControlName="alternatorBelt"></ion-checkbox>
       </div>
       <div class="flex justify-between items-center my-3">
        <ion-text class="font-Lato font-medium">Air Compressor Engine</ion-text>
         <ion-checkbox slot="start" formControlName="airCompresseorEngine"></ion-checkbox>
       </div>
       <div class="flex justify-between items-center my-3">
        <ion-text class="font-Lato font-medium">Leaks & Hoses</ion-text>
         <ion-checkbox slot="start" formControlName="leaksHoses"></ion-checkbox>
       </div>
       <div class="flex justify-between items-center my-3">
        <ion-text class="font-Lato font-medium">Fan & Shroud</ion-text>
         <ion-checkbox slot="start" formControlName="fanShroud"></ion-checkbox>
       </div>
       <div class="flex justify-between items-center my-3">
        <ion-text class="font-Lato font-medium">Radiator</ion-text>
         <ion-checkbox slot="start" formControlName="radiator"></ion-checkbox>
       </div>
       <div class="flex justify-between items-center my-3">
        <ion-text class="font-Lato font-medium">Wiring</ion-text>
         <ion-checkbox slot="start" formControlName="wiring"></ion-checkbox>
       </div>
       <div class="flex justify-between items-center my-3">
        <ion-text class="font-Lato font-medium">Steering Box</ion-text>
         <ion-checkbox slot="start" formControlName="steeringBox"></ion-checkbox>
       </div>
       <div class="flex justify-between items-center my-3">
        <ion-text class="font-Lato font-medium">Steering Linkage</ion-text>
         <ion-checkbox slot="start" formControlName="steeringLinkage"></ion-checkbox>
       </div>
       <div class="flex justify-between items-center my-3">
        <ion-text class="font-Lato font-medium">Hoses(Steering)</ion-text>
         <ion-checkbox slot="start" formControlName="hosesSteering"></ion-checkbox>
       </div>
       <div class="flex justify-between items-center my-3">
        <ion-text class="font-Lato font-medium">Turbo</ion-text>
         <ion-checkbox slot="start" formControlName="turbo"></ion-checkbox>
       </div>
       <div class="flex justify-between items-center my-3">
        <ion-text class="font-Lato font-medium">Window Fluid</ion-text>
         <ion-checkbox slot="start" formControlName="windowFluid"></ion-checkbox>
       </div>
       <div class="flex justify-between items-center my-3">
        <ion-text class="font-Lato font-medium">Mirror</ion-text>
         <ion-checkbox slot="start" formControlName="mirror"></ion-checkbox>
       </div>
       <div class="flex justify-between items-center my-3">
        <ion-text class="font-Lato font-medium">Clutch Condition</ion-text>
         <ion-checkbox slot="start" formControlName="clutchCondition"></ion-checkbox>
       </div>
       <ion-text class="text-sm font-semibold font-Lato text-black mt-2">Add Comments</ion-text>
         <ion-textarea [autoGrow]="true"
         class="border-2 rounded-lg my-2 px-1"
         formControlName="commentsEngine"
         placeholder="Add your comments here">
         </ion-textarea>
      </div>
      <div class="ion-text-center my-5">
        <ion-text class="bg-3D8AA4 bg-opacity-10 text-3D8AA4 font-medium font-Lato border-2 border-opacity-60 rounded-lg border-3D8AA4 px-5 py-2">Score = {{result}}%</ion-text>
       </div>
      <ion-button
      expand="block"
      class="close-out-button font-Lato mb-4 mt-0 mx-8 bg-opacity-10 text-white"
      (click)="next()">
      <div>Next</div>
    </ion-button>

  </form>

  <!-- MODEL -->
  <ion-modal #modal [isOpen]="isModalOpen" backdropDismiss="false">
    <ng-template>
      <ion-content class="ion-padding">
        <ion-text class="flex justify-center items-center ion-text-center">
          This is a one-time fill form. Please verify your readings before going to the next page.
        </ion-text>
        <div class="flex flex-col justify-center items-center mt-3">
          <ion-button class="text-white w-full" expand="block" (click)="submit()">
            <div *ngIf="(loadingSpinner | async) === false">Next</div>
            <ion-spinner name="crescent" *ngIf="(loadingSpinner | async)"></ion-spinner>
          </ion-button>
          <ion-button class="text-white w-full" expand="block" (click)="edit()">
            Edit
          </ion-button>
        </div>
      </ion-content>
    </ng-template>
  </ion-modal>
  <!-- MODEL -->
</ion-content>
